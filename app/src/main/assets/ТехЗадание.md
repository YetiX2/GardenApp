Техническое задание (ТЗ)

Проект: Мобильное приложение «Дачный помощник»
Версия документа: v0.3 (уточнённый черновик: стратегия прибыли + маркетплейсы)
Назначение: Управление дачным участком/садом: учёт растений и грядок, планирование и напоминания работ, учёт удобрений и урожая, визуальный план участка, журнал работ.

1. Цели и критерии успеха

Упростить ведение «карты» участка с привязкой растений/грядок к местоположению.

Давать своевременные напоминания: полив, подкормки (NPK/пресеты), обрезка, обработки, пересадка, сбор урожая.

Вести историю работ и аналитики по грядке/растению (урожайность, внесённые удобрения, мероприятия).

Быстрый старт: пресеты культур и удобрений, шаблоны работ.

Ключевые KPI: MAU, доля задач с выполнением в срок, среднее число активных культур на пользователя, CR с онбординга, удержание D30.

2. Целевая аудитория

Владельцы частных участков/садов, огородники-любители и продвинутые пользователи.

Диапазон навыков: от новичков до опытных.

3. Платформы и распространение

Мобильные платформы: Android (MVP). iOS — позже.

Стратегия запуска: MVP на Android, сбор метрик и фидбэка, затем портирование на iOS.

Магазины: Google Play.

4. Язык и локализация

Базовая локаль: RU.

[Q] Нужна ли EN/KZ/др. сразу?

5. Архитектурные решения (высокий уровень)

Подход к данным: offline‑first, локальная БД + фоновая синхронизация в облако.

Аккаунт и синхронизация: ДА в MVP — авторизация, синхронизация между устройствами.

Бэкенд: обязателен (REST), push (перспектива), хранение пресетов и журналов.

Технологии: Kotlin, Jetpack Compose, Room/SQLDelight, WorkManager, Notifications; DI (Hilt/Koin).

Монетизация сервисы: рекламные сети (AdMob/AppLovin/экв.) через медиацию; внешние платежи Xsolla (RU) и/или Play Billing (KZ/Other) — конфигурируемо per‑region.

Интеграции: Погода — после MVP; Маркетплейсы (аффилиат/deeplink/UTM) — после MVP v2; Календарь устройства — опционально позже.

6. Основные пользовательские сценарии (MVP)

Создание «Сада/Участка»

Список садов (CRUD). Онбординг с типом участка и базовыми настройками.

Визуальный план участка (обязательно для MVP)

Редактор плана: зоны/грядки, деревья, координаты на сетке, привязка посадок.

Импорт фона (фото/схема) — желателен, если укладывается в сроки MVP. Масштаб/слои — базовые.

Каталог культур и посадок

Поля: название, сорт, дата посадки, журнал удобрений (дата+доза+NPK), урожай (дата+кол-во+ед.).

Пресеты удобрений и культур для самых частых культур (например: томаты, огурцы, картофель, яблоня, смородина, крыжовник и т.д.).

Задачи и напоминания

Шаблоны работ: полив, подкормка, обрезка, обработка, сбор, пересадка; периодические и разовые; уведомления.

Журнал работ/событий

История по растениям/грядкам, фильтры/поиск, фото — необязательно (если есть — без жёстких требований к размеру).

Импорт/экспорт данных

ДА в MVP: CSV/JSON локально (share/save). Минимальный UX.

7. Расширенный функционал (после MVP)

Интеграция с погодой (рекомендации по поливу/обработкам).

Виджеты на домашний экран.

Совместная работа (семья/бригада) — не в MVP.

Расширенная аналитика урожайности, отчёты по сезону (PDF/CSV).

Инвентарь/материалы.

Интеграции с маркетплейсами (аффилиат/товарные ссылки, deeplink, UTM, регионы/склад).

Казахстан (KZ): Kaspi.kz (ритейл‑экосистема №1), Wildberries KZ, OZON KZ, OLX KZ (классифайд).

Россия (RU): Wildberries, Ozon, Yandex Market.

Беларусь (BY): Wildberries BY, Ozon (локальное присутствие/витрины).

Узбекистан (UZ): Uzum Market (лидер), Zoodmall/Alif Shop (доп.).

Украина (UA): Rozetka, Prom.ua (маркетплейс‑агрегатор).

Прочие СНГ: уточняемые локальные площадки + кросс‑бордер (по доступности).

Для каждой площадки: схема интеграции (deeplink/витрина/аффилиат), UTM‑трекинг, витрина «Где купить», правила маркировки рекламы.

8. Требования к UX/UI

Онбординг с пресетами и подсказками. Режим «новичок» — ДА.

3–5 основных экрана: «Сады», «План», «Культуры/Посадки», «Задачи», «Журнал».

Быстрое добавление события (FAB «+»).

Дизайн с иллюстрациями, поддержка тёмной темы.

Единицы урожая выбираются пользователем (кг/шт/л/др.).

9. Нефункциональные требования

Производительность: плавность на устройствах 4‑летней давности.

Надёжность: офлайн‑first, предотвращение потери данных.

Безопасность: без обязательного пин/биометрии/шифрования в MVP.

Совместимость: Android minSdk: TBD (уточнить после оценки библиотек и уведомлений). iOS — позже.

10. Данные и модели (черновик)

Сад (Garden): id, название, площадь?, фото/схема?, климат‑зона?, заметки.

Зона/Грядка (Bed/Area): id, gardenId, тип, координаты/контур, заметки.

Культура (Crop): id, название, пресеты (NPK, дозы, частота работ).

Посадка (Planting): id, cropId, сорт, bedId/coord, дата посадки, статус.

Удобрение (FertilizationEntry): id, plantingId, дата, N‑P‑K, доза, примечание.

Урожай (HarvestEntry): id, plantingId, дата, количество, единица.

Задача (Task): id, тип, объект (сад/зона/посадка), расписание/дата, статус.

Журнал (LogEntry): id, объект, тип события, дата, фото[], комментарий.

11. Технические требования (MVP)

Локальная БД: Room/SQLDelight; миграции.

Планировщик: WorkManager; точные будильники при необходимости.

Уведомления: каналы, быстрые действия (выполнено/перенести).

Хранилище: Scoped Storage, разрешения по требованию.

Тесты: unit (модели/use‑cases), UI (Compose).

Логи/аналитика: Firebase Analytics/Crashlytics (рекомендовано).

Архитектура: Clean Architecture + MVVM, DI (Hilt/Koin).

Аккаунт/синк: минимальный бэкенд (REST), авторизация (e‑mail/Google Sign‑In — выбрать на этапе проектирования).

12. Монетизация и лицензии

Модель: реклама (медиация, баннеры+редкие interstitial+мягкий rewarded) + подписка «без рекламы».

Платежи: RU — через Xsolla (веб/линки), KZ/Other — Play Billing; годовые/сезонные планы.

Аффилиат/маркетплейсы: партнёрские ссылки/товары (семена, удобрения, инвентарь), deeplink, UTM‑метки; прозрачное обозначение рекламы.

Лицензии/комплаенс: соответствие политикам стора/рекламы/аффилиата.

13. Юридическое и приватность

Политика конфиденциальности, офлайн‑режим без регистрации.

[Q] Сбор персональных данных? Геоданные/адрес участка?

Соответствие требованиям магазинов.

14. План MVP и дорожная карта (уточнено)

MVP‑объём:

Android‑приложение.

Список садов (CRUD) + онбординг.

Обязательный визуальный редактор плана (базовый), привязка посадок к зонам.

Культуры/посадки с полями: название, сорт, дата посадки, журнал удобрений, учёт урожая (единицы выбирает пользователь).

Задачи/напоминания по шаблонам.

Журнал работ (фото — опционально).

Импорт/экспорт CSV/JSON локально.

Аккаунт и синхронизация (минимально необходимая), бэкенд.

Этап 2: Погода и рекомендации, виджеты, расширенная аналитика, отчёты (PDF/CSV).
Этап 3: Совместная работа, инвентарь/материалы, углубление каталога пресетов.
Этап 4 (монетизация+интеграции): медиация рекламы, подписки годовые/сезонные, аффилиат с маркетплейсами.

15. Открытые вопросы к заказчику (после уточнений)

minSdk для Android — уточнить после оценки зависимостей уведомлений/WorkManager/рекламы.

Провайдер аутентификации (e‑mail/Google Sign‑In/др.).

Импорт фоновой схемы/фото в редактор плана в MVP?

Перечень «самых частых культур» для пресетов (стартовый список).

Ограничения по размеру фото.

Интеграция с календарём устройства — позже?

Маркетплейсы/аффилиат: какие площадки приоритетны (перечень, регионы), тип интеграции (deeplink, API‑каталог), требования к маркировке рекламы.

16. Риски и предположения

Офлайн‑first без обязательной регистрации; сезонность спроса.

Риски: сложность редактора плана, качество пресетов удобрений, зависимость от погодных API.

Комплаенс: разные правила биллинга/внешних ссылок по регионам; маркировка рекламы/аффилиата; хранение UTM и персональных данных.

17. План роста прибыли (6 недель)

Цель: поднять ARPU и удержание, выйти на безубыточность при ≤13–15k MAU.

W1–2 (Монетизация рекламы):

Включить медиацию (AdMob/AppLovin/экв.), A/B частоты: 2.6 vs 3.1 показа/DAU/день.

Interstitial «по событию» (после крупных действий), rewarded: временная разблокировка расширенных функций.

Кэп частоты и анти‑спам; трекинг eCPM/ARPDAU по гео/форматам.

W2–3 (Подписки):

KZ: тест 529 vs 599–699 ₸, добавить годовой план (‑20% к месячной ×12).

RU (Xsolla): месячная/годовая/«сезонная» (март–октябрь); тест paywall по «N напоминаний/день».

W3–4 (Контент и удержание):

Осенне‑зимние чек‑листы, пуши 1×/нед., виджет «задачи на сегодня».

Онбординг‑пакеты для топ‑культур; фотожурнал «Итоги сезона» с шарингом.

W4–6 (Маркетплейсы и партнёрки):

Подключить аффилиат‑deeplink (семена/удобрения/инвентарь) + UTM, страница‑хаб «Где купить».

A/B разместить «товары по теме» в карточках культур/работ (неинвазивно).

Трекать CTR→EPC, отключать слабые офферы.

Метрики/KPI: ARPU, eCPM, показов/DAU/день, конверсия подписки (KZ/RU/Other), DAU/MAU, удержание D7/D30, ревенью/месяц, EPC по партнёркам.

18. Инфраструктурные расходы (прод) — БАЗА (вариант A)

Архитектура: Hetzner (API) + Neon (Postgres) + Cloudflare R2 (файлы/фото). Пиковая нагрузка: 3–5 RPS, MAU→12k.

Компонент	Конфигурация	Тариф/мес	Примечание
API (Hetzner Cloud)	2 vCPU / 2 GB RAM / 40 GB SSD	~€7	1 VM, Nginx, авто‑TLS, снапшоты раз в неделю
PostgreSQL (Neon)	prod‑план, PITR, 1–2 CU	~$29	ретенция 7–14 дней, пулер подключений
Объектное хранилище (R2)	10–30 GB/мес	~$0.50	$0.015/GB·мес, отдача через Cloudflare
Логи/мониторинг	Sentry/Grafana/BetterStack (free)	$0	в бесплатных квотах стартуем
ИТОГО / месяц
≈ $40	≈ 20 800 ₸ (при 1 USD ≈ 520 ₸)
ИТОГО / год
≈ $480	≈ 2496 00 ₸

Что входит в базу:

DAO‑нагрузка: до ~5 RPS стабильно, P95<300–400 мс.

Бэкапы: Neon — PITR + daily snapshot; Hetzner — weekly snapshot диска; R2 — версияция + lifecycle.

SLO: 99.9% API; RPO ≤ 15 мин, RTO ≤ 30 мин.

Резерв/запас:

Вертикальный апскейл API до 2 vCPU / 4 GB (+~€3–5).

Увеличение Neon до 2–3 CU при росте отчётных запросов.

R2: рост на 50 GB → +$0.75/мес.

Следующие шаги:

Terraform‑болванка (VPC, VM, firewall, DNS/TLS, бакет R2, Neon).

CI/CD (GitHub Actions) — сборка контейнера, миграции БД, деплой на Hetzner.

Runbook (инциденты): PITR в Neon, восстановление снапшота, ротация секретов/ключей.

19. Результаты и методика расчётов (зафиксировано)
    19.1. Горизонт и сценарии

Горизонт: 24 месяца (2 года), помесячно.

Сценарии (поддерживаются параллельно):
S1 — База (месячная подписка) + аффилиат 30% видимости.
S2 — + Годовая подписка (доля от конверсий = 30%, множитель цены 6.5×) + аффилиат 30%.
S3 — + Годовая + Paywall: множитель конверсии +50%, множитель рекламы −5%; аффилиат 30%.

19.2. Основные допущения и константы

Доли гео (RU‑фокус): RU 80% / KZ 15% / Other 5% (можно параметризовать).

Связь DAU и MAU: DAU = 0.24 × MAU.

База показов рекламы: 2.6 показа/DAU/день × коэффициент сезонности S_imps[m].

База eCPM по гео: KZ $1.8 / RU $1.2 / Other $3.0 × S_eCPM[m].

Конверсия в подписку/мес (месячная): KZ 0.8% / RU 0.6% / Other 0.6% × сценарный множитель (sub_conv_multiplier).

Цены подписки (базовые): RU = 80 ₽/мес, KZ = 529 ₸/мес, Other = $3.49/мес.
Курсы для пересчёта в USD: USD→RUB = 79.09, USD→KZT = 520.62.

Комиссия биллинга: Xsolla fee = 7% → NET = GROSS × (1 − 0.07).

Инфраструктурные затраты (БАЗА): $40 + $0.005 × MAU в месяц.

Offerwall boost: Янв/Фев/Мар и Окт/Ноя/Дек → реклама × 1.10.

Аффилиат (витрина): видимость 30% от MAU в месяц.

19.3. Сезонность

Реклама:
S_imps = [0.60, 0.70, 0.90, 1.10, 1.30, 1.35, 1.25, 1.10, 0.90, 0.80, 0.65, 0.55]
S_eCPM = [0.85, 0.90, 0.95, 1.05, 1.10, 1.10, 1.05, 1.00, 0.95, 0.90, 0.90, 0.95]

Аффилиат:
Семена [0.7, 1.1, 1.4, 1.5, 1.4, 1.0, 0.8, 0.7, 0.7, 0.8, 0.9, 0.8]
Удобрения [0.6, 0.9, 1.2, 1.4, 1.5, 1.4, 1.1, 0.9, 0.8, 0.8, 0.7, 0.6]
Инвентарь [0.7, 0.8, 1.0, 1.2, 1.3, 1.3, 1.2, 1.0, 0.9, 0.9, 0.8, 0.7]

19.4. Формулы расчёта

(1) Аудитория:
DAU_m = 0.24 × MAU_m

(2) Показов рекламы за месяц:
Imps_m = DAU_m × (2.6 × S_imps[m]) × 30

(3) Рекламная выручка (по гео):
AdRev_m = Σ_geo ( (Imps_m × share_geo) / 1000 × (eCPM_base_geo × S_eCPM[m]) )
if m ∈ {Янв, Фев, Мар, Окт, Ноя, Дек}: AdRev_m := AdRev_m × 1.10.

(4) Подписка (месячная/годовая):
subs_geo_m = MAU_m × share_geo × conv_geo × sub_conv_multiplier
subs_monthly = subs_geo_m × (1 − annual_share); subs_annual = subs_geo_m × annual_share
Gross_sub_geo_m = subs_monthly × Price_geo_USD + subs_annual × (Price_geo_USD × annual_mult)
Sub_NET_m = Σ_geo (Gross_sub_geo_m × 0.93).

(5) Аффилиат (агрегат):
Clicks_c_m = (MAU_m × 0.30) × CTR_c × Season_c[m]
EPC_c = AOV_c × Comm_c × Conv_c
Aff_m = Σ_c (Clicks_c_m × EPC_c).

(6) Выручка / ARPU / затраты / прибыль:
Revenue_m = AdRev_m + Sub_NET_m + Aff_m
ARPU_m = Revenue_m / MAU_m
Costs_m = Infra_m + Marketing_m
где Infra_m = (40 + 0.005 × MAU_m) × USD→RUB, Marketing_m — бюджет на маркетинг (₽) по п.20.

(7) Кэш‑флоу:
Опер. кэш‑флоу_m = Profit_m
Кумулятивный кэш_m = Σ_{i=1..m} Опер. кэш‑флоу_i

19.5. Траектория MAU

Старт 30 MAU → к М12 ≈ 12 000 MAU, к М24 ≈ 24 000 MAU (две S‑кривые).

19.6. Чувствительность

FX (USD→RUB/KZT) ±15%; цены подписки: RU 60/80/99 ₽; KZ 529/599/699 ₸; Other $2.99/3.49/3.99.

19.7. KPI‑дашборд

По месяцам: MAU, DAU, ARPU (₽), Реклама (₽), Подписка NET (₽), Аффилиат (₽), Выручка (₽), Затраты (₽), Прибыль (₽), Кум. кэш (₽).

19.8. Итоговые файлы

RU v10.1 (старт 30 MAU), RU v10.2 (с маркетингом).

v9 (сенситивити FX/цен, кэш‑флоу), графики KPI по S2.

19.9. Примечания

Paywall (S3) меняет только конверсию подписки и нагрузку рекламы; остальное без изменений.

20. Маркетинг и рост (зафиксировано)
    20.1. Каналы и доли вклада к М12 (оценка)

ASO (органика стора) — ≈40% установок.

Контент/сообщества (VK/ТГ/Дзен) — ≈25%.

Реферал‑программа — ≈12–15%.

Партнёрства/маркетплейсы — ≈10–12%.

Инфлюенсеры/YouTube — ≈8–10%.

Платный перформанс — ≈5%.

20.2. Логика воронки (резюме)

Installs_m → MAU_m (Retention) → DAU_m = 0.24×MAU_m → Impressions_m = DAU×(2.6×S_imps)×30 → AdRev_m.

20.3. Маркетинговый бюджет (₽/мес, 24 мес)

Год 1 (Янв…Дек): 50k, 70k, 150k, 200k, 180k, 120k, 90k, 50k, 50k, 100k, 120k, 90k.
Год 2 (Янв…Дек, +10%): 55k, 77k, 165k, 220k, 198k, 132k, 99k, 55k, 55k, 110k, 132k, 99k.
Суммарно за 24 мес ≈ 2.67 млн ₽. Бюджет распределён по сезонности: пики — март‑май и октябрь‑ноябрь.

20.4. Включение маркетинга в финмодель

Costs_m = Infra_m + Marketing_m (см. формулы п.19.4).
В Excel RU v10.2 добавлен столбец «Маркетинг (₽)» и пересчитаны: «Затраты (₽)», «Прибыль (₽)», «Кумулятивный кэш (₽)» для S1/S2/S3.

20.5. Контроль KPI по росту (неделя → действие)

ASO: позиции по ключам, Store CVR.

Контент: CTR постов, трафик на стор, лидеры‑гайдики.

Реферал: R0 приглашений/100 активных; тест награды.

Retention: D1/D7/D30; пуш‑сценарии.

Реклама: показов/DAU/день, fill‑rate, eCPM.

Аффилиат: EPC/категория, отключение слабых офферов.